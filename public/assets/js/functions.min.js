function initMeasurement(){const e=document.querySelectorAll("[data-num][data-unit]");if(e.length<=0)return;const t=document.querySelectorAll("[data-amount]"),n=1/48,i=[{value:1,name:"1 cup"},{value:.75,name:"3/4 cups"},{value:2/3,name:"2/3 cups"},{value:.5,name:"1/2 cup"},{value:1/3,name:"1/3 cup"},{value:.25,name:"1/4 cup"},{value:.125,name:"1/8 cup"},{value:.0625,name:"1 tbsp"},{value:.03125,name:"1/2 tbsp"},{value:2*n,name:"2 tsp"},{value:n,name:"1 tsp"},{value:.015625,name:"3/4 tsp"},{value:n/2,name:"1/2 tsp"},{value:n/4,name:"1/4 tsp"},{value:n/8,name:"1/8 tsp"},{value:n/16,name:"1/16 tsp"}],r=(e,t)=>["1","1/2","1/3","1/4","1/8","1/16"].includes(t)?e:(e=>{if(["g","oz","ml","tsp","tbsp"].includes(e))return e;const t=e[e.length-1];return["h","o"].includes(t)?e.replace(/(.)$/,"$1es"):["y"].includes(t)?e.replace(/y$/,"ies"):`${e}s`})(e);function a(e,t){if(Math.abs(e)<=1e-14)return[];if(e<0||0===t.length)return null;let n=t[0];const i=n.value,r=a(e,t.slice(1));let o;if(n.name.match(/^\d+ cups?$/)){if(o=a(e-i,t),o){const e=o.filter((e=>e.name.match(/^\d+ cups?$/))).map((e=>e.value)).reduce(((e,t)=>e+t),0);e>0&&(o=o.filter((e=>!e.name.match(/^\d+ cups?$/))),n={value:e+n.value,name:`${e+n.value} cups`})}}else o=a(e-i,t.slice(1));if(null===r&&null===o)return null;if(null===r)return[n,...o];if(null===o)return r;const s=r.length,l=o.length+1;return s<l||s===l&&o.map((e=>e.name)).includes("2 tsp")?r:[n,...o]}const o=(e,t)=>{"tbsp"===t?e/=16:"tsp"===t&&(e/=48);const n=i.find((t=>Math.abs(e-t.value)<=1e-14));if(n)return n.name;const o=i.filter((t=>t.value<=e));if(o.length<=0)return"pinch";const s=a(e,o);if(s){const e=s.length;if(2===e&&s[0].name.match(/^\d+ cups?$/)&&s[1].name.includes("cup"))return`${s[0].value} ${s[1].name.replace(/ cups?$/,"")} ${r("cup",s[1].value)}`;if(e>0)return s.map((e=>e.name)).join(" + ")}return`${e.toFixed(2).replace(/(\.[^0])0$/,"$1")} ${r(t,e)}`},s=(e,t,n,i)=>{const a=`${e=e.toString()} ${r(t,e)}`;if(1===n&&t===i)return a;const s=!["oz","g","ml"].includes(t);if(1===n&&s&&!e.includes("."))return a;let l=(e=>{let t=0;if(e.includes(" ")&&(e=e.split(" "),t=parseInt(e[0],10),e=e[1]),e.includes("/")){const n=e.split("/");e=t+parseInt(n[0],10)/parseInt(n[1],10)}return parseFloat(e)})(e.toString())*n;return s?((e,t)=>{let n=e.toString();if(!n.includes("."))return`${n} ${r(t,n)}`;if(["cup","tbsp","tsp"].includes(t))return o(e,t);const i=[{value:.75,fraction:"3/4"},{value:.66667,fraction:"2/3"},{value:.5,fraction:"1/2"},{value:.33333,fraction:"1/3"},{value:.25,fraction:"1/4"},{value:.125,fraction:"1/8"},{value:.0625,fraction:"1/16"}],a=i.length;let s;const l=n.split("."),u="0"===l[0]?"":l[0],d=parseFloat(`.${parseFloat(l[1]).toFixed(5)}`);for(s=0;s<a;s+=1)if(d===i[s].value)return n=`${u} ${i[s].fraction}`.trim(),`${n} ${r(t,n)}`;return`${n} ${r(t,n)}`})(l,t):("oz"===t&&"g"===i?(u=l,l=Math.round(28.34952*u),t=i):"g"===t&&"oz"===i&&(l=(e=>parseFloat((e/28.34952).toFixed(1)))(l),t=i),`${l.toLocaleString()} ${r(t,e.toString())}`);var u},l=({multiplier:n,units:i})=>{if(!n){const e=document.querySelector("[data-multiplier][disabled]");e&&(n=e.getAttribute("data-multiplier"))}if(!i){const e=document.querySelector("[data-units][disabled]");e&&(i=e.getAttribute("data-units"))}e.forEach((e=>{e.innerText=s(e.getAttribute("data-num"),e.getAttribute("data-unit"),n,i)})),t.forEach((e=>{e.innerText=parseFloat(e.getAttribute("data-amount"))*n}))},u=(e,t)=>{document.querySelector(`[${t}][disabled]`).removeAttribute("disabled"),e.setAttribute("disabled",!0),e.nextSibling?e.nextSibling.focus():e.previousSibling.focus()},d=document.createElement("fieldset");d.setAttribute("id","fraction-fieldset");const c=document.createElement("legend");c.innerText="Multiplier",d.appendChild(c);const m=document.createElement("div");d.appendChild(m);[{label:"1/2",value:.5,disabled:!1,aria:"Half recipe"},{label:"1x",value:1,disabled:!0,aria:"Normal recipe"},{label:"2x",value:2,disabled:!1,aria:"Double recipe"}].forEach((e=>{const t=document.createElement("button");t.setAttribute("aria-label",e.aria),t.setAttribute("data-multiplier",e.value),e.disabled&&t.setAttribute("disabled",!0),t.setAttribute("class","button--secondary"),t.setAttribute("type","button"),t.innerText=e.label,t.addEventListener("click",(e=>{u(e.target,"data-multiplier"),l({multiplier:e.target.getAttribute("data-multiplier")})})),m.appendChild(t)}));const p=document.createElement("div");p.setAttribute("id","recipe-buttons"),p.appendChild(d);const b=document.getElementById("recipe-side");let E;if(b&&b.prepend(p),document.querySelector('[data-unit="oz"]'))E="oz";else{if(!document.querySelector('[data-unit="g"]'))return;E="g"}const A=document.createElement("fieldset");A.setAttribute("id","unit-fieldset");const g=document.createElement("legend");g.innerText="Units",A.appendChild(g);const v=document.createElement("div");A.appendChild(v);[{unit:"oz",aria:"ounces"},{unit:"g",aria:"grams"}].forEach((e=>{const t=document.createElement("button");t.setAttribute("data-units",e.unit),t.setAttribute("aria-label",e.aria),e.unit===E&&t.setAttribute("disabled",!0),t.setAttribute("class","button--secondary"),t.setAttribute("type","button"),t.innerText=e.unit,t.addEventListener("click",(e=>{u(e.target,"data-units"),l({units:e.target.getAttribute("data-units")})})),v.appendChild(t)})),p.appendChild(A)}function Passwordable(e){const t=t=>{const n=document.getElementById(t.target.getAttribute("aria-controls"));"password"===n.getAttribute("type")?(n.setAttribute("type","text"),n.setAttribute("aria-label","Hide Password"),e.innerText="Hide"):(n.setAttribute("type","password"),n.setAttribute("aria-label","Show Password"),e.innerText="Show")},n=()=>{document.querySelectorAll("[data-toggle-password]").forEach((e=>{document.getElementById(e.getAttribute("aria-controls")).setAttribute("type","password")}))};(()=>{e.addEventListener("click",t);e.closest("form").addEventListener("submit",n)})()}function initPasswordable(){document.querySelectorAll("[data-toggle-password]").forEach((e=>{Passwordable(e)}))}function initSticky(){const e=document.querySelector("[data-sticky]");if(!e)return;const t=()=>{const t=e.getAttribute("data-sticky-offset-top"),n=e.getAttribute("data-sticky-top-margin"),i=t-parseInt(n,10);window.scrollY>=i?(e.classList.add("sticky"),e.style.right=`${e.getAttribute("data-sticky-offset-right")}px`):(e.classList.remove("sticky"),e.style.right=null)},n=()=>{e.classList.remove("sticky");const n=e.getBoundingClientRect();e.setAttribute("data-sticky-offset-top",window.scrollY+n.top),e.setAttribute("data-sticky-offset-right",window.innerWidth-n.right),t()};window.addEventListener("scroll",t),window.addEventListener("resize",n),n()}function Timer(e){const t=e=>{const t=new Date(0);let n;return t.setSeconds(e/1e3),n=e<6e5?15:e<36e5?14:e<36e6?12:11,t.toISOString().substring(n).replace(/\.\d+Z$/,"")},n=e=>{const n=e-(new Date).getTime();return n<=0?"":t(n)},i=e=>{e.target.parentNode.remove()},r=()=>{const e=document.querySelectorAll(".timer--on");if(e.length<=0)return clearInterval(window.TICK_INTERVAL),window.TICK_INTERVAL=null,window.DRAG_ELEMENT=null,window.DRAG_START_X=0,window.DRAG_START_Y=0,document.removeEventListener("mousemove",l),document.removeEventListener("keydown",a),document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("touchcancel",d,!0),void document.removeEventListener("touchmove",c,{passive:!1});e.forEach((e=>{const r=e.getAttribute("data-since");if(r){const n=(e=>{const n=(new Date).getTime()-e;return n<=0?"":t(n)})(Date.parse(r));return void(e.querySelector(".timer__text").innerText=n)}const a=n(Date.parse(e.getAttribute("data-until")));if(""===a){e.classList.remove("timer--on");const t=e.querySelector(".timer__text");return t.removeEventListener("mousedown",o),t.removeEventListener("mouseup",s),t.addEventListener("click",i),t.innerText="Stop",void e.querySelector("audio").play()}e.querySelector(".timer__text").innerText=a}))},a=e=>{"Escape"===e.key&&(window.DRAG_ELEMENT=null)},o=e=>{window.DRAG_ELEMENT=e.target.closest(".timer");const t=parseFloat(window.DRAG_ELEMENT.style.left)||window.DRAG_ELEMENT.offsetLeft,n=parseFloat(window.DRAG_ELEMENT.style.top)||window.DRAG_ELEMENT.offsetTop,i=e.clientX?e.clientX:e.x,r=e.clientY?e.clientY:e.y;return window.DRAG_START_X=t?i-t:i,window.DRAG_START_Y=n?r-n:r,e.preventDefault(),!1},s=()=>{window.DRAG_ELEMENT=null},l=e=>{if(null===window.DRAG_ELEMENT)return;const t=window.DRAG_ELEMENT.querySelector(".timer__text");let n=e.clientX-window.DRAG_START_X;n=Math.max(0,n),n=Math.min(n,window.innerWidth-t.clientWidth);let i=e.clientY-window.DRAG_START_Y;i=Math.max(0,i),i=Math.min(i,window.innerHeight-t.clientHeight),window.DRAG_ELEMENT.style.left=`${n}px`,window.DRAG_ELEMENT.style.top=`${i}px`,window.DRAG_ELEMENT.style.bottom="auto",window.DRAG_ELEMENT.style.right="auto"},u=e=>{const t=e.changedTouches[0],n=document.createEvent("MouseEvent");return n.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e.type],!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),n},d=e=>{if("timer__text"!==e.target.className)return;e.changedTouches[0].target.dispatchEvent(u(e)),e.preventDefault()},c=e=>{null!==window.DRAG_ELEMENT&&(l(u(e)),e.preventDefault())},m=()=>{const t=new Date,u=parseInt(e.getAttribute("data-timer"),10),m=0===u;t.setSeconds(t.getSeconds()+u);const p=document.getElementById("timer-container"),b=document.createElement("div");b.setAttribute("class","timer timer--on"),m?b.setAttribute("data-since",t):b.setAttribute("data-until",t),p.appendChild(b);const E=document.createElement("button");if(E.setAttribute("class","timer__text"),E.setAttribute("type","button"),E.innerText=m?"0:00":n(t),E.addEventListener("mousedown",o),E.addEventListener("mouseup",s),b.appendChild(E),!m){const e=document.createElement("audio");e.setAttribute("loop",!0),b.appendChild(e);const t=document.createElement("source");t.setAttribute("src","/assets/sounds/magnolia-simms.mp3"),t.setAttribute("type","audio/mpeg"),e.appendChild(t)}const A=document.createElement("button");A.setAttribute("aria-label","Stop"),A.setAttribute("class","timer__stop"),A.setAttribute("type","button"),A.innerText="×",A.addEventListener("click",i),b.appendChild(A),window.TICK_INTERVAL||(window.TICK_INTERVAL=setInterval(r,500),window.DRAG_ELEMENT=null,window.DRAG_START_X=0,window.DRAG_START_Y=0,document.addEventListener("mousemove",l),document.addEventListener("keydown",a),document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("touchcancel",d,!0),document.addEventListener("touchmove",c,{passive:!1}))};e.addEventListener("click",m)}function initTimer(){const e=document.querySelectorAll("[data-timer]");if(e.length<=0)return;e.forEach((e=>{Timer(e)}));const t=document.createElement("div");t.setAttribute("id","timer-container"),document.body.appendChild(t)}function Toggleable(e){const t=()=>{const t=e.getAttribute("data-toggleable"),n=document.querySelectorAll(t),i=e.getAttribute("data-toggleable-body-class");i&&document.body.classList.toggle(i),Array.from(n).forEach((t=>{let n;t.classList.contains("show")?(n=e.getAttribute("data-toggleable-show"),e.setAttribute("aria-expanded","false"),t.classList.remove("show")):(n=e.getAttribute("data-toggleable-hide"),e.setAttribute("aria-expanded","true"),t.classList.add("show")),n&&(e.innerText=n)}))};e.addEventListener("click",t)}function initToggleable(){document.querySelectorAll("[data-toggleable]").forEach((e=>{Toggleable(e)}))}document.getElementById("skip").addEventListener("click",(e=>{let t=e.target.getAttribute("href").split("#")[1];t=document.getElementById(t),t.setAttribute("tabindex",-1),t.addEventListener("blur",(()=>{t.removeAttribute("tabindex")})),t.focus()})),initMeasurement(),initPasswordable(),window.addEventListener("beforeprint",(()=>{document.querySelectorAll("details").forEach((e=>{null!==e.getAttribute("open")&&e.setAttribute("data-reopen","1"),e.setAttribute("open","open")}))})),window.addEventListener("afterprint",(()=>{document.querySelectorAll("details").forEach((e=>{e.getAttribute("data-reopen")?(e.setAttribute("open","open"),e.removeAttribute("data-reopen")):e.removeAttribute("open")}))})),initSticky(),initTimer(),initToggleable();