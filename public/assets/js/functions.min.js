function Ajax(e){e.addEventListener("submit",(t=>{t.preventDefault();const n=new FormData(e),o={method:e.getAttribute("method"),body:n,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}};fetch(e.getAttribute("action"),o).then((e=>{if(200!==e.status)throw e;document.getElementById("add-note-button").click()})).catch((()=>{window.alert("There was an error saving your notes.")}))}))}function initAjax(){document.querySelectorAll("[data-ajax]").forEach((e=>{Ajax(e)}))}function Confirmable(e){e.addEventListener("click",(e=>{const t=e.target.getAttribute("data-confirmable");window.confirm(t)&&e.target.closest("form").submit()}))}function initConfirmable(){document.querySelectorAll("[data-confirmable]").forEach((e=>{Confirmable(e)}))}function debounce(e,t,n){let o;return function(){const i=this,r=arguments,a=function(){o=null,n||e.apply(i,r)},s=n&&!o;clearTimeout(o),o=setTimeout(a,t),s&&e.apply(i,r)}}function Filterable(e){const t=document.querySelectorAll("[data-filterable-input]"),n=e.querySelectorAll("[data-filterable-item]"),o=document.getElementById("no-results"),i=e=>e.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['’]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"),r=e=>{const t=e.target,r=t.getAttribute("data-filterable-key"),a=i(t.value);n.forEach((e=>{const t=e.querySelector(`[data-key="${r}"]`);var n;!a||t&&(n=t,n.getAttribute("data-value")?n.getAttribute("data-value"):i(n.innerText)).indexOf(a)>-1?e.style.display="":e.style.display="none"})),(()=>{const e=Array.from(n).some((e=>"none"!==e.style.display));o.style.display=e?"none":""})()};t.forEach((e=>{e.addEventListener("keyup",debounce(r,100)),e.value&&r({target:e})}))}function initFilterable(){document.querySelectorAll("[data-filterable-list]").forEach((e=>{Filterable(e)}))}function Password(e){e.addEventListener("click",(t=>{const n=t.target.closest(".password-container").querySelector(".password-input");"password"===n.getAttribute("type")?(n.setAttribute("type","text"),e.innerText="Hide"):(n.setAttribute("type","password"),e.innerText="Show")}))}function initPassword(){document.querySelectorAll("[data-toggle-password]").forEach((e=>{Password(e)}))}function initSticky(){const e=document.querySelector("[data-sticky]");if(!e)return;const t=()=>{e.setAttribute("data-sticky-offset-top",e.offsetTop),e.style.right=window.innerWidth-e.offsetLeft-e.scrollWidth+"px"};window.addEventListener("scroll",(()=>{const t=window.pageYOffset,n=parseInt(e.getAttribute("data-sticky-offset-top"),10)-parseInt(e.getAttribute("data-sticky-top"),10);e.style.position=t>n?"fixed":""})),window.addEventListener("resize",t),t()}function Timer(e){const t=e=>{const t=new Date(0);let n;return t.setSeconds(e/1e3),n=e<6e5?15:e<36e5?14:e<36e6?12:11,t.toISOString().substring(n).replace(/\.\d+Z$/,"")},n=e=>{const n=e-(new Date).getTime();return n<=0?"":t(n)},o=e=>{e.target.parentNode.remove()},i=()=>{const e=document.querySelectorAll(".timer--on");if(e.length<=0)return clearInterval(window.TICK_INTERVAL),window.TICK_INTERVAL=null,window.DRAG_ELEMENT=null,window.DRAG_START_X=0,window.DRAG_START_Y=0,document.removeEventListener("mousemove",c),document.removeEventListener("keydown",r),document.removeEventListener("touchstart",l,!0),document.removeEventListener("touchend",l,!0),document.removeEventListener("touchcancel",l,!0),void document.removeEventListener("touchmove",u,{passive:!1});e.forEach((e=>{const i=e.getAttribute("data-since");if(i){const n=(e=>{const n=(new Date).getTime()-e;return n<=0?"":t(n)})(Date.parse(i));return void(e.querySelector(".timer__text").innerText=n)}const r=n(Date.parse(e.getAttribute("data-until")));if(""===r){e.classList.remove("timer--on");const t=e.querySelector(".timer__text");return t.removeEventListener("mousedown",a),t.removeEventListener("mouseup",s),t.addEventListener("click",o),t.innerText="Stop",void e.querySelector("audio").play()}e.querySelector(".timer__text").innerText=r}))},r=e=>{"Escape"===e.key&&(window.DRAG_ELEMENT=null)},a=e=>{window.DRAG_ELEMENT=e.target.closest(".timer");const t=parseFloat(window.DRAG_ELEMENT.style.left)||window.DRAG_ELEMENT.offsetLeft,n=parseFloat(window.DRAG_ELEMENT.style.top)||window.DRAG_ELEMENT.offsetTop,o=e.clientX?e.clientX:e.x,i=e.clientY?e.clientY:e.y;return window.DRAG_START_X=t?o-t:o,window.DRAG_START_Y=n?i-n:i,e.preventDefault(),!1},s=()=>{window.DRAG_ELEMENT=null},c=e=>{if(null===window.DRAG_ELEMENT)return;const t=window.DRAG_ELEMENT.querySelector(".timer__text");let n=e.clientX-window.DRAG_START_X;n=Math.max(0,n),n=Math.min(n,window.innerWidth-t.clientWidth);let o=e.clientY-window.DRAG_START_Y;o=Math.max(0,o),o=Math.min(o,window.innerHeight-t.clientHeight),window.DRAG_ELEMENT.style.left=`${n}px`,window.DRAG_ELEMENT.style.top=`${o}px`,window.DRAG_ELEMENT.style.bottom="auto",window.DRAG_ELEMENT.style.right="auto"},d=e=>{const t=e.changedTouches[0],n=document.createEvent("MouseEvent");return n.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e.type],!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),n},l=e=>{if("timer__text"!==e.target.className)return;e.changedTouches[0].target.dispatchEvent(d(e)),e.preventDefault()},u=e=>{null!==window.DRAG_ELEMENT&&(c(d(e)),e.preventDefault())},m=()=>{const t=new Date,d=parseInt(e.getAttribute("data-timer"),10),m=0===d;t.setSeconds(t.getSeconds()+d);const E=document.getElementById("timer-container"),w=document.createElement("div");w.setAttribute("class","timer timer--on"),m?w.setAttribute("data-since",t):w.setAttribute("data-until",t),E.appendChild(w);const p=document.createElement("button");if(p.setAttribute("class","timer__text"),p.setAttribute("type","button"),p.innerText=m?"0:00":n(t),p.addEventListener("mousedown",a),p.addEventListener("mouseup",s),w.appendChild(p),!m){const e=document.createElement("audio");e.setAttribute("loop",!0),w.appendChild(e);const t=document.createElement("source");t.setAttribute("src","/assets/sounds/magnolia-simms.mp3"),t.setAttribute("type","audio/mpeg"),e.appendChild(t)}const A=document.createElement("button");A.setAttribute("aria-label","Stop"),A.setAttribute("class","timer__stop"),A.setAttribute("type","button"),A.innerText="×",A.addEventListener("click",o),w.appendChild(A),window.TICK_INTERVAL||(window.TICK_INTERVAL=setInterval(i,500),window.DRAG_ELEMENT=null,window.DRAG_START_X=0,window.DRAG_START_Y=0,document.addEventListener("mousemove",c),document.addEventListener("keydown",r),document.addEventListener("touchstart",l,!0),document.addEventListener("touchend",l,!0),document.addEventListener("touchcancel",l,!0),document.addEventListener("touchmove",u,{passive:!1}))};e.addEventListener("click",m)}function initTimer(){const e=document.querySelectorAll("[data-timer]");if(e.length<=0)return;e.forEach((e=>{Timer(e)}));const t=document.createElement("div");t.setAttribute("id","timer-container"),document.body.appendChild(t)}function Toggleable(e){e.addEventListener("click",(e=>{const t=e.target.getAttribute("data-toggleable");document.querySelector(t).classList.toggle("show");const n=e.target.getAttribute("data-toggleable-body-class");n&&document.body.classList.toggle(n)}))}function initToggleable(){document.querySelectorAll("[data-toggleable]").forEach((e=>{Toggleable(e)}))}initAjax(),initConfirmable(),initFilterable(),initPassword(),initSticky(),initTimer(),initToggleable();