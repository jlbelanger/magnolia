function Ajax(t){t.addEventListener("submit",(e=>{e.preventDefault();const n=new FormData(t),o={method:t.getAttribute("method"),body:n,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}},a=Spinner.show();fetch(t.getAttribute("action"),o).then((t=>{if(Spinner.hide(a),200!==t.status)throw t;Toast.show("Saved successfully.",{class:"toast--success"})})).catch((()=>{Spinner.hide(a),Toast.show("There was an error saving your notes.",{class:"toast--danger"})}))}))}function initAjax(){document.querySelectorAll("[data-ajax]").forEach((t=>{Ajax(t)}))}function onBeforeUnload(t){return t.preventDefault(),t.returnValue="You have unsaved changes. Are you sure you want to leave the page?"}function addUnloadListener(){window.addEventListener("beforeunload",onBeforeUnload,{capture:!0})}function removeUnloadListener(){window.removeEventListener("beforeunload",onBeforeUnload,{capture:!0})}function initBeforeUnload(){const t=document.getElementById("form");if(t){t.querySelectorAll("input,select,textarea").forEach((t=>{t.addEventListener("keyup",addUnloadListener),t.addEventListener("change",addUnloadListener)})),t.addEventListener("submit",removeUnloadListener)}}function Confirmable(t){const e=e=>{Modal({message:e.target.getAttribute("data-confirmable"),buttons:[{label:"Cancel",class:"button--secondary"},{label:e.target.innerText,class:e.target.getAttribute("class"),onClick:()=>{t.closest("form").submit()}}]})};t.addEventListener("click",e,!0)}function initConfirmable(){document.querySelectorAll("[data-confirmable]").forEach((t=>{Confirmable(t)}))}function debounce(t,e,n){let o;return function(...a){const s=this,l=n&&!o;clearTimeout(o),o=setTimeout((()=>{o=null,n||t.apply(s,a)}),e),l&&t.apply(s,a)}}function Modal(t){(()=>{document.body.classList.add("modal-open");const e=document.createElement("dialog");e.setAttribute("class","modal"),e.setAttribute("tabindex","-1");const n=document.createElement("div");n.setAttribute("class","modal__box"),e.appendChild(n);const o=document.createElement("p");o.innerText=t.message,n.appendChild(o);const a=document.createElement("p");a.setAttribute("class","modal__options"),n.appendChild(a),t.buttons.forEach((t=>{const n=document.createElement("button");n.setAttribute("class",`button ${t.class}`.trim()),n.setAttribute("type","button"),n.innerText=t.label,n.addEventListener("click",(()=>{Object.prototype.hasOwnProperty.call(t,"onClick")&&t.onClick(),e.close()})),a.appendChild(n)})),e.addEventListener("click",(t=>{"DIALOG"===t.target.tagName&&e.close()})),document.body.appendChild(e),e.showModal(),e.focus()})()}function Slugable(t){const e=t.getAttribute("data-slug"),n=document.getElementById(e),o=e=>{var n;t.value=(n=e.target.value)?n.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['â€™.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"):""};n.addEventListener("keyup",o)}function initSlugable(){document.querySelectorAll("[data-slug]").forEach((t=>{Slugable(t)}))}initAjax(),initBeforeUnload(),initConfirmable(),initSlugable();class Spinner{static show(){let t=document.querySelector(".spinner");return t||(t=document.createElement("div"),t.setAttribute("class","spinner"),t.setAttribute("role","alert"),t.innerText="Loading...",document.body.appendChild(t)),t.style.display="",t}static hide(t){t.style.display="none"}}class Toast{static show(t,e={}){e.class=e.class||"",e.closeButtonClass=e.closeButtonText||"",e.closeButtonText=e.closeButtonText||"Close",e.duration=e.duration||5e3;let n=document.getElementById("toast-container");n||(n=document.createElement("div"),n.setAttribute("id","toast-container"),document.body.append(n));const o=`toast-${(new Date).getTime()}`,a=document.createElement("div");a.setAttribute("class",`toast ${e.class}`.trim()),a.setAttribute("id",o),a.setAttribute("role","alert"),a.style.animationDuration=`${e.duration}ms`,n.appendChild(a);const s=document.createElement("p");if(s.setAttribute("class","toast-text"),s.innerText=t,a.appendChild(s),!e.hideClose){const t=t=>{Toast.hide(t)},n=document.createElement("button");n.setAttribute("class",`toast-close ${e.closeButtonClass}`.trim()),n.setAttribute("type","button"),e.closeButtonAttributes&&Object.keys(e.closeButtonAttributes).forEach((t=>{n.setAttribute(t,e.closeButtonAttributes[t])})),n.innerText=e.closeButtonText,n.addEventListener("click",t),a.appendChild(n)}return setTimeout((()=>{a.remove()}),e.duration+1e3),a}static hide(t){t.target.closest(".toast").remove()}}function Toggleable(t){const e=()=>{const e=t.getAttribute("data-toggleable"),n=document.querySelectorAll(e),o=t.getAttribute("data-toggleable-body-class");o&&document.body.classList.toggle(o),Array.from(n).forEach((e=>{let n;n=e.classList.contains("show")?(e=>{const n=t.getAttribute("aria-controls");return t.setAttribute("aria-expanded","false"),e.classList.remove("show"),document.body.classList.remove(`show-${n}`),t.getAttribute("data-toggleable-show")})(e):(e=>{const n=t.getAttribute("aria-controls");return t.setAttribute("aria-expanded","true"),e.classList.add("show"),document.body.classList.add(`show-${n}`),t.getAttribute("data-toggleable-hide")})(e),n&&t.setAttribute("title",n)}))};t.addEventListener("click",e)}function initToggleable(){document.querySelectorAll("[data-toggleable]").forEach((t=>{Toggleable(t)}))}initToggleable();