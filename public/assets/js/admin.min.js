function Ajax(t){t.addEventListener("submit",(e=>{e.preventDefault();const a=new FormData(t),n={method:t.getAttribute("method"),body:a,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}},o=Spinner.show();fetch(t.getAttribute("action"),n).then((t=>{if(Spinner.hide(o),200!==t.status)throw t;Toast.show("Saved successfully.",{class:"toast--success"})})).catch((()=>{Spinner.hide(o),Toast.show("There was an error saving your notes.",{class:"toast--danger"})}))}))}function initAjax(){document.querySelectorAll("[data-ajax]").forEach((t=>{Ajax(t)}))}function onBeforeUnload(t){return t.preventDefault(),t.returnValue="You have unsaved changes. Are you sure you want to leave the page?"}function addUnloadListener(){window.addEventListener("beforeunload",onBeforeUnload,{capture:!0})}function removeUnloadListener(){window.removeEventListener("beforeunload",onBeforeUnload,{capture:!0})}function initBeforeUnload(){const t=document.getElementById("form");if(t){t.querySelectorAll("input,select,textarea").forEach((t=>{t.addEventListener("keyup",addUnloadListener),t.addEventListener("change",addUnloadListener)})),t.addEventListener("submit",removeUnloadListener)}}function Confirmable(t){const e=e=>{Modal({message:e.target.getAttribute("data-confirmable"),buttons:[{label:"Cancel",class:"button--secondary"},{label:e.target.innerText,class:e.target.getAttribute("class"),onClick:()=>{t.closest("form").submit()}}]})};t.addEventListener("click",e,!0)}function initConfirmable(){document.querySelectorAll("[data-confirmable]").forEach((t=>{Confirmable(t)}))}function debounce(t,e,a){let n;return function(...o){const s=this,l=a&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,a||t.apply(s,o)}),e),l&&t.apply(s,o)}}function Modal(t){(()=>{document.body.classList.add("modal-open");const e=document.createElement("dialog");e.setAttribute("class","modal"),e.setAttribute("tabindex","-1");const a=document.createElement("div");a.setAttribute("class","modal__box"),e.appendChild(a);const n=document.createElement("p");n.innerText=t.message,a.appendChild(n);const o=document.createElement("p");o.setAttribute("class","modal__options"),a.appendChild(o),t.buttons.forEach((t=>{const a=document.createElement("button");a.setAttribute("class",`button ${t.class}`.trim()),a.setAttribute("type","button"),a.innerText=t.label,a.addEventListener("click",(()=>{Object.prototype.hasOwnProperty.call(t,"onClick")&&t.onClick(),e.close()})),o.appendChild(a)})),e.addEventListener("click",(t=>{"DIALOG"===t.target.tagName&&e.close()})),document.body.appendChild(e),e.showModal(),e.focus()})()}function Slugable(t){const e=t.getAttribute("data-slug"),a=document.getElementById(e),n=e=>{var a;t.value=(a=e.target.value)?a.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['â€™.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"):""};a.addEventListener("keyup",n)}function initSlugable(){document.querySelectorAll("[data-slug]").forEach((t=>{Slugable(t)}))}initAjax(),initBeforeUnload(),initConfirmable(),initSlugable();class Spinner{static show(){let t=document.querySelector(".spinner");return t||(t=document.createElement("div"),t.setAttribute("class","spinner"),t.setAttribute("role","status"),t.innerText="Loading...",document.body.appendChild(t)),t.classList.remove("hide"),t}static hide(t){t.classList.add("hide")}}class Toast{static show(t,e={}){e.class=e.class||"",e.closeButtonClass=e.closeButtonClass||"",e.closeButtonText=e.closeButtonText||"Close",e.duration=e.duration||5e3;let a=document.getElementById("toast-container");a||(a=document.createElement("div"),a.setAttribute("id","toast-container"),document.body.append(a));const n=`toast-${(new Date).getTime()}`,o=document.createElement("div");o.setAttribute("aria-live","polite"),o.setAttribute("class",`toast ${e.class}`.trim()),o.setAttribute("id",n),o.setAttribute("role","alert"),o.style.animationDuration=`${e.duration}ms`,a.appendChild(o);const s=document.createElement("p");if(s.setAttribute("class","toast-text"),s.innerText=t,o.appendChild(s),!e.hideClose){const t=t=>{Toast.hide(t)},a=document.createElement("button");a.setAttribute("aria-label",e.closeButtonText),a.setAttribute("class",`toast-close ${e.closeButtonClass}`.trim()),a.setAttribute("type","button"),e.closeButtonAttributes&&Object.keys(e.closeButtonAttributes).forEach((t=>{a.setAttribute(t,e.closeButtonAttributes[t])})),a.addEventListener("click",t),o.appendChild(a)}return setTimeout((()=>{o.remove()}),e.duration+1e3),o}static hide(t){t.target.closest(".toast").remove()}}function Toggleable(t){const e=()=>{const e=t.getAttribute("data-toggleable"),a=document.querySelectorAll(e),n=t.getAttribute("data-toggleable-body-class");n&&document.body.classList.toggle(n),Array.from(a).forEach((e=>{let a;a=e.classList.contains("show")?(e=>{const a=t.getAttribute("aria-controls");return t.setAttribute("aria-expanded","false"),e.classList.remove("show"),document.body.classList.remove(`show-${a}`),t.getAttribute("data-toggleable-show")})(e):(e=>{const a=t.getAttribute("aria-controls");return t.setAttribute("aria-expanded","true"),e.classList.add("show"),document.body.classList.add(`show-${a}`),t.getAttribute("data-toggleable-hide")})(e),a&&t.setAttribute("title",a)}))};t.addEventListener("click",e)}function initToggleable(){document.querySelectorAll("[data-toggleable]").forEach((t=>{Toggleable(t)}))}initToggleable();