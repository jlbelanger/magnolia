function Ajax(e){e.addEventListener("submit",(t=>{t.preventDefault();const n=new FormData(e),o={method:e.getAttribute("method"),body:n,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}},a=Spinner.show();fetch(e.getAttribute("action"),o).then((e=>{if(Spinner.hide(a),200!==e.status)throw e;Toast.show("Saved successfully.",{class:"toast--success"})})).catch((()=>{Spinner.hide(a),Toast.show("There was an error saving your notes.",{class:"toast--danger"})}))}))}function initAjax(){document.querySelectorAll("[data-ajax]").forEach((e=>{Ajax(e)}))}function onBeforeUnload(e){return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave the page?"}function addUnloadListener(){window.addEventListener("beforeunload",onBeforeUnload,{capture:!0})}function removeUnloadListener(){window.removeEventListener("beforeunload",onBeforeUnload,{capture:!0})}function initBeforeUnload(){const e=document.getElementById("form");if(e){e.querySelectorAll("input,select,textarea").forEach((e=>{e.addEventListener("keyup",addUnloadListener),e.addEventListener("change",addUnloadListener)})),e.addEventListener("submit",removeUnloadListener)}}function Confirmable(e){const t=t=>{Modal({message:t.target.getAttribute("data-confirmable"),buttons:[{label:"Cancel",class:"button--secondary"},{label:t.target.innerText,class:t.target.getAttribute("class"),onClick:()=>{e.closest("form").submit()}}]})};e.addEventListener("click",t,!0)}function initConfirmable(){document.querySelectorAll("[data-confirmable]").forEach((e=>{Confirmable(e)}))}function debounce(e,t,n){let o;return function(...a){const s=this,l=n&&!o;clearTimeout(o),o=setTimeout((()=>{o=null,n||e.apply(s,a)}),t),l&&e.apply(s,a)}}function Modal(e){(()=>{document.body.classList.add("modal-open");const t=document.createElement("dialog");t.setAttribute("class","modal"),t.setAttribute("tabindex","-1");const n=document.createElement("div");n.setAttribute("class","modal__box"),t.appendChild(n);const o=document.createElement("p");o.innerText=e.message,n.appendChild(o);const a=document.createElement("p");a.setAttribute("class","modal__options"),n.appendChild(a),e.buttons.forEach((e=>{const n=document.createElement("button");n.setAttribute("class",`button ${e.class}`.trim()),n.setAttribute("type","button"),n.innerText=e.label,n.addEventListener("click",(()=>{Object.prototype.hasOwnProperty.call(e,"onClick")&&e.onClick(),t.close()})),a.appendChild(n)})),t.addEventListener("click",(e=>{"DIALOG"===e.target.tagName&&t.close()})),document.body.appendChild(t),t.showModal(),t.focus()})()}function Slugable(e){const t=e.getAttribute("data-slug"),n=document.getElementById(t),o=t=>{var n;e.value=(n=t.target.value)?n.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['â€™.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"):""};n.addEventListener("keyup",o)}function initSlugable(){document.querySelectorAll("[data-slug]").forEach((e=>{Slugable(e)}))}initAjax(),initBeforeUnload(),initConfirmable(),initSlugable();class Spinner{static show(){let e=document.querySelector(".spinner");return e||(e=document.createElement("div"),e.setAttribute("class","spinner"),e.setAttribute("role","alert"),e.innerText="Loading...",document.body.appendChild(e)),e.style.display="",e}static hide(e){e.style.display="none"}}class Toast{static show(e,t={}){t.class=t.class||"",t.closeButtonClass=t.closeButtonText||"",t.closeButtonText=t.closeButtonText||"Close",t.duration=t.duration||5e3;let n=document.getElementById("toast-container");n||(n=document.createElement("div"),n.setAttribute("id","toast-container"),document.body.append(n));const o=`toast-${(new Date).getTime()}`,a=document.createElement("div");a.setAttribute("class",`toast ${t.class}`.trim()),a.setAttribute("id",o),a.setAttribute("role","alert"),a.style.animationDuration=`${t.duration}ms`,n.appendChild(a);const s=document.createElement("p");if(s.setAttribute("class","toast-text"),s.innerText=e,a.appendChild(s),!t.hideClose){const e=e=>{Toast.hide(e)},n=document.createElement("button");n.setAttribute("class",`toast-close ${t.closeButtonClass}`.trim()),n.setAttribute("type","button"),t.closeButtonAttributes&&Object.keys(t.closeButtonAttributes).forEach((e=>{n.setAttribute(e,t.closeButtonAttributes[e])})),n.innerText=t.closeButtonText,n.addEventListener("click",e),a.appendChild(n)}return setTimeout((()=>{a.remove()}),t.duration+1e3),a}static hide(e){e.target.closest(".toast").remove()}}